<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script src="../node_modules/@webcomponents/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../bower_components/web-component-tester/browser.js"></script>
    <script src="../dist/progressive-image.js"></script>
    <link rel="stylesheet" href="../dist/progressive-image.css" />
  </head>
  <body>
    <img
      is="progressive-image"
      id="fixture"
      width="100"
      height="100"
      src="https://dummyimage.com/3999x3999/000/fff.png"
      data-blurry-src="https://dummyimage.com/3999x3999/000/fff.png"
      alt="dummy image"
    />
    <script>
      suite('<img is="progressive-image">', () => {
        let fixture;

        before(() => {
          fixture = document.getElementById('fixture');
        });

        test('is "progressive-image"', () => {
          const ProgressiveImage = customElements.get('progressive-image');
          expect(fixture).to.be.an.instanceof(ProgressiveImage);
        });

        test('use svg when loading blurry image', () => {
          expect(fixture.src).to.equal(
            'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3C/svg%3E',
          );
        });
      });
    </script>
  </body>
</html>
